const apiUrl="https://jsonplaceholder.typicode.com/todos",getTodos=()=>{fetch(apiUrl+"?_limit=10").then(res=>res.json()).then(data=>{data.forEach(todo=>addTodoToDOM(todo))})},addTodoToDOM=todo=>{const div=document.createElement("div");div.classList.add("todo"),div.appendChild(document.createTextNode(todo.title)),div.setAttribute("data-id",todo.id),todo.completed&&div.classList.add("done"),document.getElementById("todo-list").appendChild(div)},createTodo=e=>{console.log(e),e.preventDefault();const inputNewTodo={title:e.target.firstElementChild.value,completed:!1};fetch(apiUrl,{method:"POST",body:JSON.stringify(inputNewTodo),headers:{"Content-Type":"application/json"}}).then(res=>res.json()).then(data=>addTodoToDOM(data))},toggleCompleted=e=>{e.target.classList.contains("todo")&&(e.target.classList.toggle("done"),updateTodo(e.target.dataset.id,e.target.classList.contains("done")))},updateTodo=(id,completed)=>{fetch(`${apiUrl}/${id}`,{method:"PUT",body:JSON.stringify({completed:completed}),headers:{"Content-Type":"application/json"}})},deleteToDo=e=>{if(e.target.classList.contains("todo")){const id=e.target.dataset.id;fetch(`${apiUrl}/${id}`,{method:"DELETE"}).then(()=>e.target.remove())}},init=()=>{document.addEventListener("DOMContentLoaded",getTodos),document.querySelector("#todo-form").addEventListener("submit",createTodo),document.querySelector("#todo-list").addEventListener("click",toggleCompleted),document.querySelector("#todo-list").addEventListener("dblclick",deleteToDo)};init();